+++
date="2018-09-10T17:03:12-07:00"
description="github.com/goadesign/goa"
+++


# goa
`import "github.com/goadesign/goa"`

* [Overview](#pkg-overview)
* [Index](#pkg-index)
* [Subdirectories](#pkg-subdirectories)

## <a name="pkg-overview">Overview</a>
Package goa provides the runtime support for goa microservices.

### Code Generation
goa service development begins with writing the *design* of a service. The design is described using
the goa language implemented by the github.com/goadesign/goa/design/apidsl package. The `goagen` tool
consumes the metadata produced from executing the design language to generate service specific code
that glues the underlying HTTP server with action specific code and data structures.

The goa package contains supporting functionality for the generated code including basic request
and response state management through the RequestData and ResponseData structs, error handling via
error classes, middleware support via the Middleware data structure as well as decoding and
encoding algorithms.

### Request Context
The RequestData and ResponseData structs provides access to the request and response state. goa request
handlers also accept a context.Context interface as first parameter so that deadlines and cancelation
signals may easily be implemented.

The request state exposes the underlying http.Request object as well as the deserialized payload (request
body) and parameters (both path and querystring parameters). Generated action specific contexts wrap
the context.Context, ResponseData and RequestData data structures. They expose properly typed fields
that correspond to the request parameters and body data structure descriptions appearing in the design.

The response state exposes  the response status and body length as well as the underlying ResponseWriter.
Action contexts provide action specific helper methods that write the responses as described in the
design optionally taking an instance of the media type for responses that contain a body.

Here is an example showing an "update" action corresponding to following design (extract):


	Resource("bottle", func() {
	    DefaultMedia(Bottle)
	    Action("update", func() {
	        Params(func() {
	            Param("bottleID", Integer)
	        })
	        Payload(UpdateBottlePayload)
	        Response(OK)
	        Response(NotFound)
	    })
	})

The action signature generated by goagen is:


	type BottleController interface {
	    goa.Controller
	    Update(*UpdateBottleContext) error
	}

where UpdateBottleContext is:


	type UpdateBottleContext struct {
	    context.Context      // Timeout and deadline support
	    *goa.ResponseData    // Response state access
	    *goa.RequestData     // Request state access
	    Service *goa.Service // Service handling request
	    BottleID  int        // Properly typed parameter fields
	    Payload   *UpdateBottlePayload // Properly typed payload
	}

and implements:


	func (ctx *UpdateBottleContext) OK(resp *Bottle) error
	func (ctx *UpdateBottleContext) NotFound() error

The definitions of the Bottle and UpdateBottlePayload data structures are ommitted for brievity.

### Controllers
There is one controller interface generated per resource defined via the design language. The
interface exposes the controller actions. User code must provide data structures that implement these
interfaces when mounting a controller onto a service. The controller data structure should include
an anonymous field of type *goa.Controller which takes care of implementing the middleware handling.

### Middleware
A goa middleware is a function that takes and returns a Handler. A Handler is a the low level
function which handles incoming HTTP requests. goagen generates the handlers code so each handler
creates the action specific context and calls the controller action with it.

Middleware can be added to a goa service or a specific controller using the corresponding Use
methods. goa comes with a few stock middleware that handle common needs such as logging, panic
recovery or using the RequestID header to trace requests across multiple services.

### Error Handling
The controller action methods generated by goagen such as the Update method of the BottleController
interface shown above all return an error value. goa defines an Error struct that action
implementations can use to describe the content of the corresponding HTTP response. Errors can be
created using error classes which are functions created via NewErrorClass.

The ErrorHandler middleware maps errors to HTTP responses. Errors that are instances of the Error
struct are mapped using the struct fields while other types of errors return responses with status
code 500 and the error message in the body.

### Validation
The goa design language documented in the dsl package makes it possible to attach validations to
data structure definitions. One specific type of validation consists of defining the format that a
data structure string field must follow. Example of formats include email, data time, hostnames etc.
The ValidateFormat function provides the implementation for the format validation invoked from the
code generated by goagen.

### Encoding
The goa design language makes it possible to specify the encodings supported by the API both as
input (Consumes) and output (Produces). goagen uses that information to registed the corresponding
packages with the service encoders and decoders via their Register methods. The service exposes the
DecodeRequest and EncodeResponse that implement a simple content type negotiation algorithm for
picking the right encoder for the "Content-Type" (decoder) or "Accept" (encoder) request header.

Package goa standardizes on structured error responses: a request that fails because of an
invalid input or an unexpected condition produces a response that contains a structured error.

The error data structures returned to clients contains five fields: an ID, a code, a status, a
detail and metadata. The ID is unique for the occurrence of the error, it helps correlate the
content of the response with the content of the service logs. The code defines the class of error
(e.g.  "invalid_parameter_type") and the status the corresponding HTTP status (e.g. 400). The detail
contains a message specific to the error occurrence. The metadata contains key/value pairs that
provide contextual information (name of parameters, value of invalid parameter etc.).

Instances of Error can be created via Error Class functions.
See <a href="https://goa.design/v1/implement/error_handling.html">https://goa.design/v1/implement/error_handling.html</a>
All instance of errors created via a error class implement the ServiceError interface. This
interface is leveraged by the error handler middleware to produce the error responses.

The code generated by goagen calls the helper functions exposed in this file when it encounters
invalid data (wrong type, validation errors etc.) such as InvalidParamTypeError,
InvalidAttributeTypeError etc. These methods return errors that get merged with any previously
encountered error via the Error Merge method. The helper functions are error classes stored in
global variable. This means your code can override their values to produce arbitrary error
responses.

goa includes an error handler middleware that takes care of mapping back any error returned by
previously called middleware or action handler into HTTP responses. If the error was created via an
error class then the corresponding content including the HTTP status is used otherwise an internal
error is returned. Errors that bubble up all the way to the top (i.e. not handled by the error
middleware) also generate an internal error response.




## <a name="pkg-index">Index</a>
* [Constants](#pkg-constants)
* [Variables](#pkg-variables)
* [func AddSample(key []string, val float32)](#AddSample)
* [func ContextAction(ctx context.Context) string](#ContextAction)
* [func ContextController(ctx context.Context) string](#ContextController)
* [func ContextError(ctx context.Context) error](#ContextError)
* [func ContextRequiredScopes(ctx context.Context) []string](#ContextRequiredScopes)
* [func EmitKey(key []string, val float32)](#EmitKey)
* [func IncrCounter(key []string, val float32)](#IncrCounter)
* [func InvalidAttributeTypeError(ctx string, val interface{}, expected string) error](#InvalidAttributeTypeError)
* [func InvalidEnumValueError(ctx string, val interface{}, allowed []interface{}) error](#InvalidEnumValueError)
* [func InvalidFormatError(ctx, target string, format Format, formatError error) error](#InvalidFormatError)
* [func InvalidLengthError(ctx string, target interface{}, ln, value int, min bool) error](#InvalidLengthError)
* [func InvalidParamTypeError(name string, val interface{}, expected string) error](#InvalidParamTypeError)
* [func InvalidPatternError(ctx, target string, pattern string) error](#InvalidPatternError)
* [func InvalidRangeError(ctx string, target interface{}, value interface{}, min bool) error](#InvalidRangeError)
* [func LogError(ctx context.Context, msg string, keyvals ...interface{})](#LogError)
* [func LogInfo(ctx context.Context, msg string, keyvals ...interface{})](#LogInfo)
* [func Logger(ctx context.Context) *log.Logger](#Logger)
* [func MeasureSince(key []string, start time.Time)](#MeasureSince)
* [func MergeErrors(err, other error) error](#MergeErrors)
* [func MethodNotAllowedError(method string, allowed []string) error](#MethodNotAllowedError)
* [func MissingAttributeError(ctx, name string) error](#MissingAttributeError)
* [func MissingHeaderError(name string) error](#MissingHeaderError)
* [func MissingParamError(name string) error](#MissingParamError)
* [func MissingPayloadError() error](#MissingPayloadError)
* [func NewContext(ctx context.Context, rw http.ResponseWriter, req *http.Request, params url.Values) context.Context](#NewContext)
* [func NewMetrics(conf *metrics.Config, sink metrics.MetricSink) (err error)](#NewMetrics)
* [func NewNoOpSink() metrics.MetricSink](#NewNoOpSink)
* [func NoAuthMiddleware(schemeName string) error](#NoAuthMiddleware)
* [func SetGauge(key []string, val float32)](#SetGauge)
* [func SetMetrics(m Collector)](#SetMetrics)
* [func ValidateFormat(f Format, val string) error](#ValidateFormat)
* [func ValidatePattern(p string, val string) bool](#ValidatePattern)
* [func WithAction(ctx context.Context, action string) context.Context](#WithAction)
* [func WithError(ctx context.Context, err error) context.Context](#WithError)
* [func WithLogContext(ctx context.Context, keyvals ...interface{}) context.Context](#WithLogContext)
* [func WithLogger(ctx context.Context, logger LogAdapter) context.Context](#WithLogger)
* [func WithRequiredScopes(ctx context.Context, scopes []string) context.Context](#WithRequiredScopes)
* [type APIKeySecurity](#APIKeySecurity)
* [type BasicAuthSecurity](#BasicAuthSecurity)
* [type Collector](#Collector)
  * [func GetMetrics() Collector](#GetMetrics)
  * [func NewNoOpCollector() Collector](#NewNoOpCollector)
* [type Controller](#Controller)
  * [func (ctrl *Controller) FileHandler(path, filename string) Handler](#Controller.FileHandler)
  * [func (ctrl *Controller) MuxHandler(name string, hdlr Handler, unm Unmarshaler) MuxHandler](#Controller.MuxHandler)
  * [func (ctrl *Controller) ServeFiles(path, filename string) error](#Controller.ServeFiles)
  * [func (ctrl *Controller) Use(m Middleware)](#Controller.Use)
* [type DecodeFunc](#DecodeFunc)
* [type Decoder](#Decoder)
  * [func NewGobDecoder(r io.Reader) Decoder](#NewGobDecoder)
  * [func NewJSONDecoder(r io.Reader) Decoder](#NewJSONDecoder)
  * [func NewXMLDecoder(r io.Reader) Decoder](#NewXMLDecoder)
* [type DecoderFunc](#DecoderFunc)
* [type Encoder](#Encoder)
  * [func NewGobEncoder(w io.Writer) Encoder](#NewGobEncoder)
  * [func NewJSONEncoder(w io.Writer) Encoder](#NewJSONEncoder)
  * [func NewXMLEncoder(w io.Writer) Encoder](#NewXMLEncoder)
* [type EncoderFunc](#EncoderFunc)
* [type ErrorClass](#ErrorClass)
  * [func NewErrorClass(code string, status int) ErrorClass](#NewErrorClass)
* [type ErrorResponse](#ErrorResponse)
  * [func (e *ErrorResponse) Error() string](#ErrorResponse.Error)
  * [func (e *ErrorResponse) ResponseStatus() int](#ErrorResponse.ResponseStatus)
  * [func (e *ErrorResponse) Token() string](#ErrorResponse.Token)
* [type FileServer](#FileServer)
* [type Format](#Format)
* [type HTTPDecoder](#HTTPDecoder)
  * [func NewHTTPDecoder() *HTTPDecoder](#NewHTTPDecoder)
  * [func (decoder *HTTPDecoder) Decode(v interface{}, body io.Reader, contentType string) error](#HTTPDecoder.Decode)
  * [func (decoder *HTTPDecoder) Register(f DecoderFunc, contentTypes ...string)](#HTTPDecoder.Register)
* [type HTTPEncoder](#HTTPEncoder)
  * [func NewHTTPEncoder() *HTTPEncoder](#NewHTTPEncoder)
  * [func (encoder *HTTPEncoder) Encode(v interface{}, resp io.Writer, accept string) error](#HTTPEncoder.Encode)
  * [func (encoder *HTTPEncoder) Register(f EncoderFunc, contentTypes ...string)](#HTTPEncoder.Register)
* [type Handler](#Handler)
* [type JWTSecurity](#JWTSecurity)
* [type Location](#Location)
* [type LogAdapter](#LogAdapter)
  * [func ContextLogger(ctx context.Context) LogAdapter](#ContextLogger)
  * [func NewLogger(logger *log.Logger) LogAdapter](#NewLogger)
* [type MethodNotAllowedHandler](#MethodNotAllowedHandler)
* [type Middleware](#Middleware)
  * [func NewMiddleware(m interface{}) (mw Middleware, err error)](#NewMiddleware)
* [type MuxHandler](#MuxHandler)
* [type Muxer](#Muxer)
* [type NoOpSink](#NoOpSink)
  * [func (*NoOpSink) AddSample(key []string, val float32)](#NoOpSink.AddSample)
  * [func (*NoOpSink) AddSampleWithLabels(key []string, val float32, labels []metrics.Label)](#NoOpSink.AddSampleWithLabels)
  * [func (*NoOpSink) EmitKey(key []string, val float32)](#NoOpSink.EmitKey)
  * [func (*NoOpSink) IncrCounter(key []string, val float32)](#NoOpSink.IncrCounter)
  * [func (*NoOpSink) IncrCounterWithLabels(key []string, val float32, labels []metrics.Label)](#NoOpSink.IncrCounterWithLabels)
  * [func (*NoOpSink) SetGauge(key []string, val float32)](#NoOpSink.SetGauge)
  * [func (*NoOpSink) SetGaugeWithLabels(key []string, val float32, labels []metrics.Label)](#NoOpSink.SetGaugeWithLabels)
* [type OAuth2Security](#OAuth2Security)
* [type RequestData](#RequestData)
  * [func ContextRequest(ctx context.Context) *RequestData](#ContextRequest)
* [type ResettableDecoder](#ResettableDecoder)
* [type ResettableEncoder](#ResettableEncoder)
* [type ResponseData](#ResponseData)
  * [func ContextResponse(ctx context.Context) *ResponseData](#ContextResponse)
  * [func (r *ResponseData) SwitchWriter(rw http.ResponseWriter) http.ResponseWriter](#ResponseData.SwitchWriter)
  * [func (r *ResponseData) Write(b []byte) (int, error)](#ResponseData.Write)
  * [func (r *ResponseData) WriteHeader(status int)](#ResponseData.WriteHeader)
  * [func (r *ResponseData) Written() bool](#ResponseData.Written)
* [type ServeMux](#ServeMux)
  * [func NewMux() ServeMux](#NewMux)
* [type Service](#Service)
  * [func New(name string) *Service](#New)
  * [func (service *Service) CancelAll()](#Service.CancelAll)
  * [func (service *Service) DecodeRequest(req *http.Request, v interface{}) error](#Service.DecodeRequest)
  * [func (service *Service) EncodeResponse(ctx context.Context, v interface{}) error](#Service.EncodeResponse)
  * [func (service *Service) ListenAndServe(addr string) error](#Service.ListenAndServe)
  * [func (service *Service) ListenAndServeTLS(addr, certFile, keyFile string) error](#Service.ListenAndServeTLS)
  * [func (service *Service) LogError(msg string, keyvals ...interface{})](#Service.LogError)
  * [func (service *Service) LogInfo(msg string, keyvals ...interface{})](#Service.LogInfo)
  * [func (service *Service) NewController(name string) *Controller](#Service.NewController)
  * [func (service *Service) Send(ctx context.Context, code int, body interface{}) error](#Service.Send)
  * [func (service *Service) Serve(l net.Listener) error](#Service.Serve)
  * [func (service *Service) ServeFiles(path, filename string) error](#Service.ServeFiles)
  * [func (service *Service) Use(m Middleware)](#Service.Use)
  * [func (service *Service) WithLogger(logger LogAdapter)](#Service.WithLogger)
* [type ServiceError](#ServiceError)
* [type ServiceMergeableError](#ServiceMergeableError)
* [type Unmarshaler](#Unmarshaler)


#### <a name="pkg-files">Package files</a>
[context.go](/src/github.com/goadesign/goa/context.go) [doc.go](/src/github.com/goadesign/goa/doc.go) [encoding.go](/src/github.com/goadesign/goa/encoding.go) [error.go](/src/github.com/goadesign/goa/error.go) [logging.go](/src/github.com/goadesign/goa/logging.go) [metrics.go](/src/github.com/goadesign/goa/metrics.go) [middleware.go](/src/github.com/goadesign/goa/middleware.go) [mux.go](/src/github.com/goadesign/goa/mux.go) [security.go](/src/github.com/goadesign/goa/security.go) [service.go](/src/github.com/goadesign/goa/service.go) [validation.go](/src/github.com/goadesign/goa/validation.go) 


## <a name="pkg-constants">Constants</a>
``` go
const (
    // FormatDate defines RFC3339 date values.
    FormatDate Format = "date"

    // FormatDateTime defines RFC3339 date time values.
    FormatDateTime Format = "date-time"

    // FormatUUID defines RFC4122 uuid values.
    FormatUUID Format = "uuid"

    // FormatEmail defines RFC5322 email addresses.
    FormatEmail = "email"

    // FormatHostname defines RFC1035 Internet host names.
    FormatHostname = "hostname"

    // FormatIPv4 defines RFC2373 IPv4 address values.
    FormatIPv4 = "ipv4"

    // FormatIPv6 defines RFC2373 IPv6 address values.
    FormatIPv6 = "ipv6"

    // FormatIP defines RFC2373 IPv4 or IPv6 address values.
    FormatIP = "ip"

    // FormatURI defines RFC3986 URI values.
    FormatURI = "uri"

    // FormatMAC defines IEEE 802 MAC-48, EUI-48 or EUI-64 MAC address values.
    FormatMAC = "mac"

    // FormatCIDR defines RFC4632 and RFC4291 CIDR notation IP address values.
    FormatCIDR = "cidr"

    // FormatRegexp Regexp defines regular expression syntax accepted by RE2.
    FormatRegexp = "regexp"

    // FormatRFC1123 defines RFC1123 date time values.
    FormatRFC1123 = "rfc1123"
)
```
``` go
const ErrMissingLogValue = "MISSING"
```
ErrMissingLogValue is the value used to log keys with missing values


## <a name="pkg-variables">Variables</a>
``` go
var (
    // ErrorMediaIdentifier is the media type identifier used for error responses.
    ErrorMediaIdentifier = "application/vnd.goa.error"

    // ErrBadRequest is a generic bad request error.
    ErrBadRequest = NewErrorClass("bad_request", 400)

    // ErrUnauthorized is a generic unauthorized error.
    ErrUnauthorized = NewErrorClass("unauthorized", 401)

    // ErrInvalidRequest is the class of errors produced by the generated code when a request
    // parameter or payload fails to validate.
    ErrInvalidRequest = NewErrorClass("invalid_request", 400)

    // ErrInvalidEncoding is the error produced when a request body fails to be decoded.
    ErrInvalidEncoding = NewErrorClass("invalid_encoding", 400)

    // ErrRequestBodyTooLarge is the error produced when the size of a request body exceeds
    // MaxRequestBodyLength bytes.
    ErrRequestBodyTooLarge = NewErrorClass("request_too_large", 413)

    // ErrNoAuthMiddleware is the error produced when no auth middleware is mounted for a
    // security scheme defined in the design.
    ErrNoAuthMiddleware = NewErrorClass("no_auth_middleware", 500)

    // ErrInvalidFile is the error produced by ServeFiles when requested to serve non-existant
    // or non-readable files.
    ErrInvalidFile = NewErrorClass("invalid_file", 404)

    // ErrNotFound is the error returned to requests that don't match a registered handler.
    ErrNotFound = NewErrorClass("not_found", 404)

    // ErrMethodNotAllowed is the error returned to requests that match the path of a registered
    // handler but not the HTTP method.
    ErrMethodNotAllowed = NewErrorClass("method_not_allowed", 405)

    // ErrInternal is the class of error used for uncaught errors.
    ErrInternal = NewErrorClass("internal", 500)
)
```


## <a name="AddSample">func</a> [AddSample](/src/target/metrics.go?s=3224:3265#L106)
``` go
func AddSample(key []string, val float32)
```
AddSample adds a sample to an aggregated metric
reporting count, min, max, mean, and std deviation
Usage:


	AddSample([]string{"my","namespace","key"}, 15.0)



## <a name="ContextAction">func</a> [ContextAction](/src/target/context.go?s=2799:2845#L104)
``` go
func ContextAction(ctx context.Context) string
```
ContextAction extracts the action name from the given context.



## <a name="ContextController">func</a> [ContextController](/src/target/context.go?s=2594:2644#L96)
``` go
func ContextController(ctx context.Context) string
```
ContextController extracts the controller name from the given context.



## <a name="ContextError">func</a> [ContextError](/src/target/context.go?s=3610:3654#L136)
``` go
func ContextError(ctx context.Context) error
```
ContextError extracts the error from the given context.



## <a name="ContextRequiredScopes">func</a> [ContextRequiredScopes](/src/target/security.go?s=650:706#L18)
``` go
func ContextRequiredScopes(ctx context.Context) []string
```
ContextRequiredScopes extracts the security scopes from the given context.
This should be used in auth handlers to validate that the required scopes are present in the
JWT or OAuth2 token.



## <a name="EmitKey">func</a> [EmitKey](/src/target/metrics.go?s=3425:3464#L115)
``` go
func EmitKey(key []string, val float32)
```
EmitKey emits a key/value pair
Usage:


	EmitKey([]string{"my","namespace","key"}, 15.0)



## <a name="IncrCounter">func</a> [IncrCounter](/src/target/metrics.go?s=3645:3688#L124)
``` go
func IncrCounter(key []string, val float32)
```
IncrCounter increments the counter named by `key`
Usage:


	IncrCounter([]key{"my","namespace","counter"}, 1.0)



## <a name="InvalidAttributeTypeError">func</a> [InvalidAttributeTypeError](/src/target/error.go?s=7705:7787#L181)
``` go
func InvalidAttributeTypeError(ctx string, val interface{}, expected string) error
```
InvalidAttributeTypeError is the error produced when the type of payload field does not match
the type defined in the design.



## <a name="InvalidEnumValueError">func</a> [InvalidEnumValueError](/src/target/error.go?s=8669:8753#L200)
``` go
func InvalidEnumValueError(ctx string, val interface{}, allowed []interface{}) error
```
InvalidEnumValueError is the error produced when the value of a parameter or payload field does
not match one the values defined in the design Enum validation.



## <a name="InvalidFormatError">func</a> [InvalidFormatError](/src/target/error.go?s=9229:9312#L211)
``` go
func InvalidFormatError(ctx, target string, format Format, formatError error) error
```
InvalidFormatError is the error produced when the value of a parameter or payload field does not
match the format validation defined in the design.



## <a name="InvalidLengthError">func</a> [InvalidLengthError](/src/target/error.go?s=10655:10741#L236)
``` go
func InvalidLengthError(ctx string, target interface{}, ln, value int, min bool) error
```
InvalidLengthError is the error produced when the value of a parameter or payload field does
not match the length validation defined in the design.



## <a name="InvalidParamTypeError">func</a> [InvalidParamTypeError](/src/target/error.go?s=7052:7131#L167)
``` go
func InvalidParamTypeError(name string, val interface{}, expected string) error
```
InvalidParamTypeError is the error produced when the type of a parameter does not match the type
defined in the design.



## <a name="InvalidPatternError">func</a> [InvalidPatternError](/src/target/error.go?s=9706:9772#L218)
``` go
func InvalidPatternError(ctx, target string, pattern string) error
```
InvalidPatternError is the error produced when the value of a parameter or payload field does
not match the pattern validation defined in the design.



## <a name="InvalidRangeError">func</a> [InvalidRangeError](/src/target/error.go?s=10140:10229#L225)
``` go
func InvalidRangeError(ctx string, target interface{}, value interface{}, min bool) error
```
InvalidRangeError is the error produced when the value of a parameter or payload field does
not match the range validation defined in the design. value may be a int or a float64.



## <a name="LogError">func</a> [LogError](/src/target/logging.go?s=3214:3284#L117)
``` go
func LogError(ctx context.Context, msg string, keyvals ...interface{})
```
LogError extracts the logger from the given context and calls Error on it.
This is intended for code that needs portable logging such as the internal code of goa and
middleware. User code should use the log adapters instead.



## <a name="LogInfo">func</a> [LogInfo](/src/target/logging.go?s=2787:2856#L106)
``` go
func LogInfo(ctx context.Context, msg string, keyvals ...interface{})
```
LogInfo extracts the logger from the given context and calls Info on it.
This is intended for code that needs portable logging such as the internal code of goa and
middleware. User code should use the log adapters instead.



## <a name="Logger">func</a> [Logger](/src/target/logging.go?s=1086:1130#L41)
``` go
func Logger(ctx context.Context) *log.Logger
```
Logger returns the logger stored in the context if any, nil otherwise.



## <a name="MeasureSince">func</a> [MeasureSince](/src/target/metrics.go?s=4032:4080#L136)
``` go
func MeasureSince(key []string, start time.Time)
```
MeasureSince creates a timing metric that records
the duration of elapsed time since `start`
Usage:


	MeasureSince([]string{"my","namespace","action}, time.Now())

Frequently used in a defer:


	defer MeasureSince([]string{"my","namespace","action}, time.Now())



## <a name="MergeErrors">func</a> [MergeErrors](/src/target/error.go?s=13188:13228#L294)
``` go
func MergeErrors(err, other error) error
```
MergeErrors updates an error by merging another into it. It first converts other into a
ServiceError if not already one - producing an internal error in that case. The merge algorithm
is:

* If any of e or other implements ServiceMergableError, it is handled by its Merge method.

* If any of e or other is an internal error then the result is an internal error

* If the status or code of e and other don't match then the result is a 400 "bad_request"

The Detail field is updated by concatenating the Detail fields of e and other separated
by a semi-colon. The MetaValues field of is updated by merging the map of other MetaValues
into e's where values in e with identical keys to values in other get overwritten.

Merge returns the updated error. This is useful in case the error was initially nil in
which case other is returned.



## <a name="MethodNotAllowedError">func</a> [MethodNotAllowedError](/src/target/error.go?s=11511:11576#L254)
``` go
func MethodNotAllowedError(method string, allowed []string) error
```
MethodNotAllowedError is the error produced to requests that match the path of a registered
handler but not the HTTP method.



## <a name="MissingAttributeError">func</a> [MissingAttributeError](/src/target/error.go?s=8060:8110#L187)
``` go
func MissingAttributeError(ctx, name string) error
```
MissingAttributeError is the error produced when a request payload is missing a required field.



## <a name="MissingHeaderError">func</a> [MissingHeaderError](/src/target/error.go?s=8348:8390#L193)
``` go
func MissingHeaderError(name string) error
```
MissingHeaderError is the error produced when a request is missing a required header.



## <a name="MissingParamError">func</a> [MissingParamError](/src/target/error.go?s=7421:7462#L174)
``` go
func MissingParamError(name string) error
```
MissingParamError is the error produced for requests that are missing path or querystring
parameters.



## <a name="MissingPayloadError">func</a> [MissingPayloadError](/src/target/error.go?s=6834:6866#L161)
``` go
func MissingPayloadError() error
```
MissingPayloadError is the error produced when a request is missing a required payload.



## <a name="NewContext">func</a> [NewContext](/src/target/context.go?s=1216:1330#L57)
``` go
func NewContext(ctx context.Context, rw http.ResponseWriter, req *http.Request, params url.Values) context.Context
```
NewContext builds a new goa request context.
If ctx is nil then context.Background() is used.



## <a name="NewMetrics">func</a> [NewMetrics](/src/target/metrics.go?s=2564:2638#L80)
``` go
func NewMetrics(conf *metrics.Config, sink metrics.MetricSink) (err error)
```
NewMetrics initializes goa's metrics instance with the supplied
configuration and metrics sink
This method is deprecated and SetMetrics should be used instead.



## <a name="NewNoOpSink">func</a> [NewNoOpSink](/src/target/metrics.go?s=1614:1651#L62)
``` go
func NewNoOpSink() metrics.MetricSink
```
NewNoOpSink returns a NOOP sink.



## <a name="NoAuthMiddleware">func</a> [NoAuthMiddleware](/src/target/error.go?s=11184:11230#L247)
``` go
func NoAuthMiddleware(schemeName string) error
```
NoAuthMiddleware is the error produced when goa is unable to lookup a auth middleware for a
security scheme defined in the design.



## <a name="SetGauge">func</a> [SetGauge](/src/target/metrics.go?s=4261:4301#L145)
``` go
func SetGauge(key []string, val float32)
```
SetGauge sets the named gauge to the specified value
Usage:


	SetGauge([]string{"my","namespace"}, 2.0)



## <a name="SetMetrics">func</a> [SetMetrics](/src/target/metrics.go?s=2807:2835#L88)
``` go
func SetMetrics(m Collector)
```
SetMetrics initializes goa's metrics instance with the supplied metrics adapter interface.



## <a name="ValidateFormat">func</a> [ValidateFormat](/src/target/validation.go?s=2414:2461#L83)
``` go
func ValidateFormat(f Format, val string) error
```
ValidateFormat validates a string against a standard format.
It returns nil if the string conforms to the format, an error otherwise.
The format specification follows the json schema draft 4 validation extension.
see <a href="https://json-schema.org/latest/json-schema-validation.html#anchor105">https://json-schema.org/latest/json-schema-validation.html#anchor105</a>
Supported formats are:


	- "date": RFC3339 date value
	- "date-time": RFC3339 date time value
	- "email": RFC5322 email address
	- "hostname": RFC1035 Internet host name
	- "ipv4", "ipv6", "ip": RFC2673 and RFC2373 IP address values
	- "uri": RFC3986 URI value
	- "mac": IEEE 802 MAC-48, EUI-48 or EUI-64 MAC address value
	- "cidr": RFC4632 and RFC4291 CIDR notation IP address value
	- "regexp": Regular expression syntax accepted by RE2
	- "rfc1123": RFC1123 date time value



## <a name="ValidatePattern">func</a> [ValidatePattern](/src/target/validation.go?s=4272:4319#L144)
``` go
func ValidatePattern(p string, val string) bool
```
ValidatePattern returns an error if val does not match the regular expression p.
It makes an effort to minimize the number of times the regular expression needs to be compiled.



## <a name="WithAction">func</a> [WithAction](/src/target/context.go?s=1656:1723#L70)
``` go
func WithAction(ctx context.Context, action string) context.Context
```
WithAction creates a context with the given action name.



## <a name="WithError">func</a> [WithError](/src/target/context.go?s=2408:2470#L91)
``` go
func WithError(ctx context.Context, err error) context.Context
```
WithError creates a context with the given error.



## <a name="WithLogContext">func</a> [WithLogContext](/src/target/context.go?s=2145:2225#L81)
``` go
func WithLogContext(ctx context.Context, keyvals ...interface{}) context.Context
```
WithLogContext instantiates a new logger by appending the given key/value pairs to the context
logger and setting the resulting logger in the context.



## <a name="WithLogger">func</a> [WithLogger](/src/target/context.go?s=1864:1935#L75)
``` go
func WithLogger(ctx context.Context, logger LogAdapter) context.Context
```
WithLogger sets the request context logger and returns the resulting new context.



## <a name="WithRequiredScopes">func</a> [WithRequiredScopes](/src/target/security.go?s=876:953#L26)
``` go
func WithRequiredScopes(ctx context.Context, scopes []string) context.Context
```
WithRequiredScopes builds a context containing the given required scopes.




## <a name="APIKeySecurity">type</a> [APIKeySecurity](/src/target/security.go?s=2328:2588#L56)
``` go
type APIKeySecurity struct {
    // Description of the security scheme
    Description string
    // In represents where to check for some data, `query` or `header`
    In Location
    // Name is the name of the `header` or `query` parameter to check for data.
    Name string
}

```
APIKeySecurity represents the `apiKey` security scheme. It handles a key that can be in the
headers or in the query parameters, and does authentication based on that.  The Name field
represents the key of either the query string parameter or the header, depending on the In field.










## <a name="BasicAuthSecurity">type</a> [BasicAuthSecurity](/src/target/security.go?s=1944:2036#L48)
``` go
type BasicAuthSecurity struct {
    // Description of the security scheme
    Description string
}

```
BasicAuthSecurity represents the `Basic` security scheme, which consists of a simple login/pass,
accessible through Request.BasicAuth().










## <a name="Collector">type</a> [Collector](/src/target/metrics.go?s=729:953#L35)
``` go
type Collector interface {
    AddSample(key []string, val float32)
    EmitKey(key []string, val float32)
    IncrCounter(key []string, val float32)
    MeasureSince(key []string, start time.Time)
    SetGauge(key []string, val float32)
}
```
Collector is the interface used for collecting metrics.







### <a name="GetMetrics">func</a> [GetMetrics](/src/target/metrics.go?s=2957:2984#L95)
``` go
func GetMetrics() Collector
```
GetMetrics returns goa's metrics collector adapter interface.


### <a name="NewNoOpCollector">func</a> [NewNoOpCollector](/src/target/metrics.go?s=1514:1547#L57)
``` go
func NewNoOpCollector() Collector
```
NewNoOpCollector returns a Collector that does no collection.





## <a name="Controller">type</a> [Controller](/src/target/service.go?s=1398:2301#L48)
``` go
type Controller struct {
    // Controller resource name
    Name string
    // Service that exposes the controller
    Service *Service
    // Controller root context
    Context context.Context
    // MaxRequestBodyLength is the maximum length read from request bodies.
    // Set to 0 to remove the limit altogether. Defaults to 1GB.
    MaxRequestBodyLength int64
    // FileSystem is used in FileHandler to open files. By default it returns
    // http.Dir but you can override it with another one that implements http.FileSystem.
    // For example using github.com/elazarl/go-bindata-assetfs is like below.
    //
    //	ctrl.FileSystem = func(dir string) http.FileSystem {
    //		return &assetfs.AssetFS{
    //			Asset: Asset,
    //			AssetDir: AssetDir,
    //			AssetInfo: AssetInfo,
    //			Prefix: dir,
    //		}
    //	}
    FileSystem func(string) http.FileSystem
    // contains filtered or unexported fields
}

```
Controller defines the common fields and behavior of generated controllers.










### <a name="Controller.FileHandler">func</a> (\*Controller) [FileHandler](/src/target/service.go?s=13238:13304#L366)
``` go
func (ctrl *Controller) FileHandler(path, filename string) Handler
```
FileHandler returns a handler that serves files under the given filename for the given route path.
The logic for what to do when the filename points to a file vs. a directory is the same as the
standard http package ServeFile function. The path may end with a wildcard that matches the rest
of the URL (e.g. *filepath). If it does the matching path is appended to filename to form the
full file path, so:


	c.FileHandler("/index.html", "/www/data/index.html")

Returns the content of the file "/www/data/index.html" when requests are sent to "/index.html"
and:


	c.FileHandler("/assets/*filepath", "/www/data/assets")

returns the content of the file "/www/data/assets/x/y/z" when requests are sent to
"/assets/x/y/z".




### <a name="Controller.MuxHandler">func</a> (\*Controller) [MuxHandler](/src/target/service.go?s=10747:10836#L298)
``` go
func (ctrl *Controller) MuxHandler(name string, hdlr Handler, unm Unmarshaler) MuxHandler
```
MuxHandler wraps a request handler into a MuxHandler. The MuxHandler initializes the request
context by loading the request state, invokes the handler and in case of error invokes the
controller (if there is one) or Service error handler.
This function is intended for the controller generated code. User code should not need to call
it directly.




### <a name="Controller.ServeFiles">func</a> (\*Controller) [ServeFiles](/src/target/service.go?s=9566:9629#L272)
``` go
func (ctrl *Controller) ServeFiles(path, filename string) error
```
ServeFiles replies to the request with the contents of the named file or directory. See
FileHandler for details.




### <a name="Controller.Use">func</a> (\*Controller) [Use](/src/target/service.go?s=10292:10333#L289)
``` go
func (ctrl *Controller) Use(m Middleware)
```
Use adds a middleware to the controller.
Service-wide middleware should be added via the Service Use method instead.




## <a name="DecodeFunc">type</a> [DecodeFunc](/src/target/service.go?s=2903:2969#L88)
``` go
type DecodeFunc func(context.Context, io.ReadCloser, interface{}) error
```
DecodeFunc is the function that initialize the unmarshaled payload from the request body.










## <a name="Decoder">type</a> [Decoder](/src/target/encoding.go?s=304:356#L19)
``` go
type Decoder interface {
    Decode(v interface{}) error
}
```
A Decoder unmarshals an io.Reader into an interface.







### <a name="NewGobDecoder">func</a> [NewGobDecoder](/src/target/encoding.go?s=2611:2650#L89)
``` go
func NewGobDecoder(r io.Reader) Decoder
```
NewGobDecoder is an adapter for the encoding package gob decoder.


### <a name="NewJSONDecoder">func</a> [NewJSONDecoder](/src/target/encoding.go?s=2053:2093#L77)
``` go
func NewJSONDecoder(r io.Reader) Decoder
```
NewJSONDecoder is an adapter for the encoding package JSON decoder.


### <a name="NewXMLDecoder">func</a> [NewXMLDecoder](/src/target/encoding.go?s=2333:2372#L83)
``` go
func NewXMLDecoder(r io.Reader) Decoder
```
NewXMLDecoder is an adapter for the encoding package XML decoder.





## <a name="DecoderFunc">type</a> [DecoderFunc](/src/target/encoding.go?s=207:244#L16)
``` go
type DecoderFunc func(r io.Reader) Decoder
```
DecoderFunc instantiates a decoder that decodes data read from the given io reader.










## <a name="Encoder">type</a> [Encoder](/src/target/encoding.go?s=901:953#L41)
``` go
type Encoder interface {
    Encode(v interface{}) error
}
```
An Encoder marshals from an interface into an io.Writer.







### <a name="NewGobEncoder">func</a> [NewGobEncoder](/src/target/encoding.go?s=2472:2511#L86)
``` go
func NewGobEncoder(w io.Writer) Encoder
```
NewGobEncoder is an adapter for the encoding package gob encoder.


### <a name="NewJSONEncoder">func</a> [NewJSONEncoder](/src/target/encoding.go?s=1910:1950#L74)
``` go
func NewJSONEncoder(w io.Writer) Encoder
```
NewJSONEncoder is an adapter for the encoding package JSON encoder.


### <a name="NewXMLEncoder">func</a> [NewXMLEncoder](/src/target/encoding.go?s=2194:2233#L80)
``` go
func NewXMLEncoder(w io.Writer) Encoder
```
NewXMLEncoder is an adapter for the encoding package XML encoder.





## <a name="EncoderFunc">type</a> [EncoderFunc](/src/target/encoding.go?s=800:837#L38)
``` go
type EncoderFunc func(w io.Writer) Encoder
```
EncoderFunc instantiates an encoder that encodes data into the given writer.










## <a name="ErrorClass">type</a> [ErrorClass](/src/target/error.go?s=4260:4326#L89)
``` go
type ErrorClass func(message interface{}, keyvals ...interface{}) error
```
ErrorClass is an error generating function.
It accepts a message and optional key value pairs and produces errors that implement
ServiceError.
If the message is a string or a fmt.Stringer then the string value is used.
If the message is an error then the string returned by Error() is used.
Otherwise the string produced using fmt.Sprintf("%v") is used.
The optional key value pairs are intended to provide additional contextual information
and are returned to the client.







### <a name="NewErrorClass">func</a> [NewErrorClass](/src/target/error.go?s=6029:6083#L130)
``` go
func NewErrorClass(code string, status int) ErrorClass
```
NewErrorClass creates a new error class.
It is the responsibility of the client to guarantee uniqueness of code.





## <a name="ErrorResponse">type</a> [ErrorResponse](/src/target/error.go?s=5219:5906#L114)
``` go
type ErrorResponse struct {
    // ID is the unique error instance identifier.
    ID string `json:"id" yaml:"id" xml:"id" form:"id"`
    // Code identifies the class of errors.
    Code string `json:"code" yaml:"code" xml:"code" form:"code"`
    // Status is the HTTP status code used by responses that cary the error.
    Status int `json:"status" yaml:"status" xml:"status" form:"status"`
    // Detail describes the specific error occurrence.
    Detail string `json:"detail" yaml:"detail" xml:"detail" form:"detail"`
    // Meta contains additional key/value pairs useful to clients.
    Meta map[string]interface{} `json:"meta,omitempty" yaml:"meta,omitempty" xml:"meta,omitempty" form:"meta,omitempty"`
}

```
ErrorResponse contains the details of a error response. It implements ServiceError.
This struct is mainly intended for clients to decode error responses.










### <a name="ErrorResponse.Error">func</a> (\*ErrorResponse) [Error](/src/target/error.go?s=11877:11915#L264)
``` go
func (e *ErrorResponse) Error() string
```
Error returns the error occurrence details.




### <a name="ErrorResponse.ResponseStatus">func</a> (\*ErrorResponse) [ResponseStatus](/src/target/error.go?s=12137:12181#L273)
``` go
func (e *ErrorResponse) ResponseStatus() int
```
ResponseStatus is the status used to build responses.




### <a name="ErrorResponse.Token">func</a> (\*ErrorResponse) [Token](/src/target/error.go?s=12255:12293#L276)
``` go
func (e *ErrorResponse) Token() string
```
Token is the unique error occurrence identifier.




## <a name="FileServer">type</a> [FileServer](/src/target/service.go?s=2392:2545#L76)
``` go
type FileServer interface {
    // FileHandler returns a handler that serves files under the given request path.
    FileHandler(path, filename string) Handler
}
```
FileServer is the interface implemented by controllers that can serve static files.










## <a name="Format">type</a> [Format](/src/target/validation.go?s=161:179#L16)
``` go
type Format string
```
Format defines a validation format.










## <a name="HTTPDecoder">type</a> [HTTPDecoder](/src/target/encoding.go?s=1452:1530#L61)
``` go
type HTTPDecoder struct {
    // contains filtered or unexported fields
}

```
HTTPDecoder is a Decoder that decodes HTTP request or response bodies given a set of
known Content-Type to decoder mapping.







### <a name="NewHTTPDecoder">func</a> [NewHTTPDecoder](/src/target/encoding.go?s=2963:2997#L99)
``` go
func NewHTTPDecoder() *HTTPDecoder
```
NewHTTPDecoder creates a decoder that maps HTTP content types to low level decoders.





### <a name="HTTPDecoder.Decode">func</a> (\*HTTPDecoder) [Decode](/src/target/encoding.go?s=3149:3240#L106)
``` go
func (decoder *HTTPDecoder) Decode(v interface{}, body io.Reader, contentType string) error
```
Decode uses registered Decoders to unmarshal a body based on the contentType.




### <a name="HTTPDecoder.Register">func</a> (\*HTTPDecoder) [Register](/src/target/encoding.go?s=3921:3996#L134)
``` go
func (decoder *HTTPDecoder) Register(f DecoderFunc, contentTypes ...string)
```
Register sets a specific decoder to be used for the specified content types. If a decoder is
already registered, it is overwritten.




## <a name="HTTPEncoder">type</a> [HTTPEncoder](/src/target/encoding.go?s=1665:1835#L67)
``` go
type HTTPEncoder struct {
    // contains filtered or unexported fields
}

```
HTTPEncoder is a Encoder that encodes HTTP request or response bodies given a set of
known Content-Type to encoder mapping.







### <a name="NewHTTPEncoder">func</a> [NewHTTPEncoder](/src/target/encoding.go?s=2770:2804#L92)
``` go
func NewHTTPEncoder() *HTTPEncoder
```
NewHTTPEncoder creates an encoder that maps HTTP content types to low level encoders.





### <a name="HTTPEncoder.Encode">func</a> (\*HTTPEncoder) [Encode](/src/target/encoding.go?s=5204:5290#L187)
``` go
func (encoder *HTTPEncoder) Encode(v interface{}, resp io.Writer, accept string) error
```
Encode uses the registered encoders and given content type to marshal and write the given value
using the given writer.




### <a name="HTTPEncoder.Register">func</a> (\*HTTPEncoder) [Register](/src/target/encoding.go?s=6078:6153#L220)
``` go
func (encoder *HTTPEncoder) Register(f EncoderFunc, contentTypes ...string)
```
Register sets a specific encoder to be used for the specified content types. If an encoder is
already registered, it is overwritten.




## <a name="Handler">type</a> [Handler](/src/target/service.go?s=2600:2671#L82)
``` go
type Handler func(context.Context, http.ResponseWriter, *http.Request) error
```
Handler defines the request handler signatures.










## <a name="JWTSecurity">type</a> [JWTSecurity](/src/target/security.go?s=2682:3132#L66)
``` go
type JWTSecurity struct {
    // Description of the security scheme
    Description string
    // In represents where to check for the JWT, `query` or `header`
    In Location
    // Name is the name of the `header` or `query` parameter to check for data.
    Name string
    // TokenURL defines the URL where you'd get the JWT tokens.
    TokenURL string
    // Scopes defines a list of scopes for the security scheme, along with their description.
    Scopes map[string]string
}

```
JWTSecurity represents an api key based scheme, with support for scopes and a token URL.










## <a name="Location">type</a> [Location](/src/target/security.go?s=185:205#L7)
``` go
type Location string
```
Location is the enum defining where the value of key based security schemes should be read:
either a HTTP request header or a URL querystring value


``` go
const LocHeader Location = "header"
```
LocHeader indicates the secret value should be loaded from the request headers.


``` go
const LocQuery Location = "query"
```
LocQuery indicates the secret value should be loaded from the request URL querystring.










## <a name="LogAdapter">type</a> [LogAdapter](/src/target/logging.go?s=461:759#L19)
``` go
type LogAdapter interface {
    // Info logs an informational message.
    Info(msg string, keyvals ...interface{})
    // Error logs an error.
    Error(msg string, keyvals ...interface{})
    // New appends to the logger context and returns the updated logger logger.
    New(keyvals ...interface{}) LogAdapter
}
```
LogAdapter is the logger interface used by goa to log informational and error messages.
Adapters to different logging backends are provided in the logging sub-packages.
goa takes care of initializing the logging context with the service, controller and
action names.







### <a name="ContextLogger">func</a> [ContextLogger](/src/target/context.go?s=3417:3467#L128)
``` go
func ContextLogger(ctx context.Context) LogAdapter
```
ContextLogger extracts the logger from the given context.


### <a name="NewLogger">func</a> [NewLogger](/src/target/logging.go?s=928:973#L36)
``` go
func NewLogger(logger *log.Logger) LogAdapter
```
NewLogger returns a goa log adpater backed by a log logger.





## <a name="MethodNotAllowedHandler">type</a> [MethodNotAllowedHandler](/src/target/mux.go?s=583:695#L19)
``` go
type MethodNotAllowedHandler func(http.ResponseWriter, *http.Request, url.Values, map[string]httptreemux.HandlerFunc)
```
MethodNotAllowedHandler provides the implementation for an MethodNotAllowed
handler. The values argument includes both the querystring and path parameter
values. The methods argument includes both the allowed method identifier
and the registered handler.










## <a name="Middleware">type</a> [Middleware](/src/target/middleware.go?s=130:162#L12)
``` go
type Middleware func(Handler) Handler
```
Middleware represents the canonical goa middleware signature.







### <a name="NewMiddleware">func</a> [NewMiddleware](/src/target/middleware.go?s=673:733#L27)
``` go
func NewMiddleware(m interface{}) (mw Middleware, err error)
```
NewMiddleware creates a middleware from the given argument. The allowed types for the
argument are:

- a goa middleware: goa.Middleware or func(goa.Handler) goa.Handler

- a goa handler: goa.Handler or func(context.Context, http.ResponseWriter, *http.Request) error

- an http middleware: func(http.Handler) http.Handler

- or an http handler: http.Handler or func(http.ResponseWriter, *http.Request)

An error is returned if the given argument is not one of the types above.





## <a name="MuxHandler">type</a> [MuxHandler](/src/target/mux.go?s=246:309#L13)
``` go
type MuxHandler func(http.ResponseWriter, *http.Request, url.Values)
```
MuxHandler provides the low level implementation for an API endpoint.
The values argument includes both the querystring and path parameter values.










## <a name="Muxer">type</a> [Muxer](/src/target/mux.go?s=1769:1843#L41)
``` go
type Muxer interface {
    MuxHandler(string, Handler, Unmarshaler) MuxHandler
}
```
Muxer implements an adapter that given a request handler can produce a mux handler.










## <a name="NoOpSink">type</a> [NoOpSink](/src/target/metrics.go?s=1719:1741#L67)
``` go
type NoOpSink struct{}

```
NoOpSink default NOOP metrics recorder










### <a name="NoOpSink.AddSample">func</a> (\*NoOpSink) [AddSample](/src/target/metrics.go?s=2208:2261#L74)
``` go
func (*NoOpSink) AddSample(key []string, val float32)
```



### <a name="NoOpSink.AddSampleWithLabels">func</a> (\*NoOpSink) [AddSampleWithLabels](/src/target/metrics.go?s=2301:2388#L75)
``` go
func (*NoOpSink) AddSampleWithLabels(key []string, val float32, labels []metrics.Label)
```



### <a name="NoOpSink.EmitKey">func</a> (\*NoOpSink) [EmitKey](/src/target/metrics.go?s=1929:1980#L71)
``` go
func (*NoOpSink) EmitKey(key []string, val float32)
```



### <a name="NoOpSink.IncrCounter">func</a> (\*NoOpSink) [IncrCounter](/src/target/metrics.go?s=2022:2077#L72)
``` go
func (*NoOpSink) IncrCounter(key []string, val float32)
```



### <a name="NoOpSink.IncrCounterWithLabels">func</a> (\*NoOpSink) [IncrCounterWithLabels](/src/target/metrics.go?s=2115:2204#L73)
``` go
func (*NoOpSink) IncrCounterWithLabels(key []string, val float32, labels []metrics.Label)
```



### <a name="NoOpSink.SetGauge">func</a> (\*NoOpSink) [SetGauge](/src/target/metrics.go?s=1743:1795#L69)
``` go
func (*NoOpSink) SetGauge(key []string, val float32)
```



### <a name="NoOpSink.SetGaugeWithLabels">func</a> (\*NoOpSink) [SetGaugeWithLabels](/src/target/metrics.go?s=1836:1922#L70)
``` go
func (*NoOpSink) SetGaugeWithLabels(key []string, val float32, labels []metrics.Label)
```



## <a name="OAuth2Security">type</a> [OAuth2Security](/src/target/security.go?s=1223:1799#L33)
``` go
type OAuth2Security struct {
    // Description of the security scheme
    Description string
    // Flow defines the OAuth2 flow type. See https://swagger.io/specification/#securitySchemeObject
    Flow string
    // TokenURL defines the OAuth2 tokenUrl.  See https://swagger.io/specification/#securitySchemeObject
    TokenURL string
    // AuthorizationURL defines the OAuth2 authorizationUrl.  See https://swagger.io/specification/#securitySchemeObject
    AuthorizationURL string
    // Scopes defines a list of scopes for the security scheme, along with their description.
    Scopes map[string]string
}

```
OAuth2Security represents the `oauth2` security scheme. It is instantiated by the generated code
accordingly to the use of the different `*Security()` DSL functions and `Security()` in the
design.










## <a name="RequestData">type</a> [RequestData](/src/target/context.go?s=306:591#L26)
``` go
type RequestData struct {
    *http.Request

    // Payload returns the decoded request body.
    Payload interface{}
    // Params contains the raw values for the parameters defined in the design including
    // path parameters, query string parameters and header parameters.
    Params url.Values
}

```
RequestData provides access to the underlying HTTP request.







### <a name="ContextRequest">func</a> [ContextRequest](/src/target/context.go?s=3004:3057#L112)
``` go
func ContextRequest(ctx context.Context) *RequestData
```
ContextRequest extracts the request data from the given context.





## <a name="ResettableDecoder">type</a> [ResettableDecoder](/src/target/encoding.go?s=483:546#L25)
``` go
type ResettableDecoder interface {
    Decoder
    Reset(r io.Reader)
}
```
ResettableDecoder is used to determine whether or not a Decoder can be reset and thus
safely reused in a sync.Pool.










## <a name="ResettableEncoder">type</a> [ResettableEncoder](/src/target/encoding.go?s=1084:1147#L47)
``` go
type ResettableEncoder interface {
    Encoder
    Reset(w io.Writer)
}
```
The ResettableEncoder is used to determine whether or not a Encoder can be reset and
thus safely reused in a sync.Pool.










## <a name="ResponseData">type</a> [ResponseData](/src/target/context.go?s=660:975#L37)
``` go
type ResponseData struct {
    http.ResponseWriter

    // The service used to encode the response.
    Service *Service
    // ErrorCode is the code of the error returned by the action if any.
    ErrorCode string
    // Status is the response HTTP status code.
    Status int
    // Length is the response body length.
    Length int
}

```
ResponseData provides access to the underlying HTTP response.







### <a name="ContextResponse">func</a> [ContextResponse](/src/target/context.go?s=3213:3268#L120)
``` go
func ContextResponse(ctx context.Context) *ResponseData
```
ContextResponse extracts the response data from the given context.





### <a name="ResponseData.SwitchWriter">func</a> (\*ResponseData) [SwitchWriter](/src/target/context.go?s=3856:3935#L145)
``` go
func (r *ResponseData) SwitchWriter(rw http.ResponseWriter) http.ResponseWriter
```
SwitchWriter overrides the underlying response writer. It returns the response
writer that was previously set.




### <a name="ResponseData.Write">func</a> (\*ResponseData) [Write](/src/target/context.go?s=4475:4526#L164)
``` go
func (r *ResponseData) Write(b []byte) (int, error)
```
Write records the amount of data written and calls the underlying writer.




### <a name="ResponseData.WriteHeader">func</a> (\*ResponseData) [WriteHeader](/src/target/context.go?s=4217:4263#L157)
``` go
func (r *ResponseData) WriteHeader(status int)
```
WriteHeader records the response status code and calls the underlying writer.




### <a name="ResponseData.Written">func</a> (\*ResponseData) [Written](/src/target/context.go?s=4071:4108#L152)
``` go
func (r *ResponseData) Written() bool
```
Written returns true if the response was written, false otherwise.




## <a name="ServeMux">type</a> [ServeMux](/src/target/mux.go?s=922:1678#L24)
``` go
type ServeMux interface {
    http.Handler
    // Handle sets the MuxHandler for a given HTTP method and path.
    Handle(method, path string, handle MuxHandler)
    // HandleNotFound sets the MuxHandler invoked for requests that don't match any
    // handler registered with Handle. The values argument given to the handler is
    // always nil.
    HandleNotFound(handle MuxHandler)
    // HandleMethodNotAllowed sets the MethodNotAllowedHandler invoked for requests
    // that match the path of a handler but not its HTTP method. The values argument
    // given to the Handler is always nil.
    HandleMethodNotAllowed(handle MethodNotAllowedHandler)
    // Lookup returns the MuxHandler associated with the given HTTP method and path.
    Lookup(method, path string) MuxHandler
}
```
ServeMux is the interface implemented by the service request muxes.
It implements http.Handler and makes it possible to register request handlers for
specific HTTP methods and request path via the Handle method.







### <a name="NewMux">func</a> [NewMux](/src/target/mux.go?s=2001:2023#L53)
``` go
func NewMux() ServeMux
```
NewMux returns a Mux.





## <a name="Service">type</a> [Service](/src/target/service.go?s=662:1315#L27)
``` go
type Service struct {
    // Name of service used for logging, tracing etc.
    Name string
    // Mux is the service request mux
    Mux ServeMux
    // Server is the service HTTP server.
    Server *http.Server
    // Context is the root context from which all request contexts are derived.
    // Set values in the root context prior to starting the server to make these values
    // available to all request handlers.
    Context context.Context
    // Request body decoder
    Decoder *HTTPDecoder
    // Response body encoder
    Encoder *HTTPEncoder
    // contains filtered or unexported fields
}

```
Service is the data structure supporting goa services.
It provides methods for configuring a service and running it.
At the basic level a service consists of a set of controllers, each implementing a given
resource actions. goagen generates global functions - one per resource - that make it
possible to mount the corresponding controller onto a service. A service contains the
middleware, not found handler, encoders and muxes shared by all its controllers.







### <a name="New">func</a> [New](/src/target/service.go?s=3024:3054#L92)
``` go
func New(name string) *Service
```
New instantiates a service with the given name.





### <a name="Service.CancelAll">func</a> (\*Service) [CancelAll](/src/target/service.go?s=5641:5676#L174)
``` go
func (service *Service) CancelAll()
```
CancelAll sends a cancel signals to all request handlers via the context.
See <a href="https://golang.org/pkg/context/">https://golang.org/pkg/context/</a> for details on how to handle the signal.




### <a name="Service.DecodeRequest">func</a> (\*Service) [DecodeRequest](/src/target/service.go?s=8777:8854#L252)
``` go
func (service *Service) DecodeRequest(req *http.Request, v interface{}) error
```
DecodeRequest uses the HTTP decoder to unmarshal the request body into the provided value based
on the request Content-Type header.




### <a name="Service.EncodeResponse">func</a> (\*Service) [EncodeResponse](/src/target/service.go?s=9245:9325#L265)
``` go
func (service *Service) EncodeResponse(ctx context.Context, v interface{}) error
```
EncodeResponse uses the HTTP encoder to marshal and write the response body based on the request
Accept header.




### <a name="Service.ListenAndServe">func</a> (\*Service) [ListenAndServe](/src/target/service.go?s=6763:6820#L201)
``` go
func (service *Service) ListenAndServe(addr string) error
```
ListenAndServe starts a HTTP server and sets up a listener on the given host/port.




### <a name="Service.ListenAndServeTLS">func</a> (\*Service) [ListenAndServeTLS](/src/target/service.go?s=7046:7125#L208)
``` go
func (service *Service) ListenAndServeTLS(addr, certFile, keyFile string) error
```
ListenAndServeTLS starts a HTTPS server and sets up a listener on the given host/port.




### <a name="Service.LogError">func</a> (\*Service) [LogError](/src/target/service.go?s=6559:6627#L196)
``` go
func (service *Service) LogError(msg string, keyvals ...interface{})
```
LogError logs the error and values at odd indeces using the keys at even indeces of the keyvals slice.




### <a name="Service.LogInfo">func</a> (\*Service) [LogInfo](/src/target/service.go?s=6337:6404#L191)
``` go
func (service *Service) LogInfo(msg string, keyvals ...interface{})
```
LogInfo logs the message and values at odd indeces using the keys at even indeces of the keyvals slice.




### <a name="Service.NewController">func</a> (\*Service) [NewController](/src/target/service.go?s=7649:7711#L221)
``` go
func (service *Service) NewController(name string) *Controller
```
NewController returns a controller for the given resource. This method is mainly intended for
use by the generated code. User code shouldn't have to call it directly.




### <a name="Service.Send">func</a> (\*Service) [Send](/src/target/service.go?s=8161:8244#L235)
``` go
func (service *Service) Send(ctx context.Context, code int, body interface{}) error
```
Send serializes the given body matching the request Accept header against the service
encoders. It uses the default service encoder if no match is found.




### <a name="Service.Serve">func</a> (\*Service) [Serve](/src/target/service.go?s=7387:7438#L215)
``` go
func (service *Service) Serve(l net.Listener) error
```
Serve accepts incoming HTTP connections on the listener l, invoking the service mux handler for each.




### <a name="Service.ServeFiles">func</a> (\*Service) [ServeFiles](/src/target/service.go?s=8485:8548#L245)
``` go
func (service *Service) ServeFiles(path, filename string) error
```
ServeFiles create a "FileServer" controller and calls ServerFiles on it.




### <a name="Service.Use">func</a> (\*Service) [Use](/src/target/service.go?s=5944:5985#L181)
``` go
func (service *Service) Use(m Middleware)
```
Use adds a middleware to the service wide middleware chain.
goa comes with a set of commonly used middleware, see the middleware package.
Controller specific middleware should be mounted using the Controller struct Use method instead.




### <a name="Service.WithLogger">func</a> (\*Service) [WithLogger](/src/target/service.go?s=6116:6169#L186)
``` go
func (service *Service) WithLogger(logger LogAdapter)
```
WithLogger sets the logger used internally by the service and by Log.




## <a name="ServiceError">type</a> [ServiceError](/src/target/error.go?s=4430:4712#L93)
``` go
type ServiceError interface {
    // ServiceError extends the error interface
    error
    // ResponseStatus dictates the status used to build the response sent to the client.
    ResponseStatus() int
    // Token is a unique value associated with the occurrence of the error.
    Token() string
}
```
ServiceError is the interface implemented by all errors created using a ErrorClass
function.










## <a name="ServiceMergeableError">type</a> [ServiceMergeableError](/src/target/error.go?s=4843:5054#L104)
``` go
type ServiceMergeableError interface {
    // ServiceMergeableError extends from the ServiceError interface.
    ServiceError

    // Merge updates an error by combining another error into it.
    Merge(other error) error
}
```
ServiceMergeableError is the interface implemented by ServiceErrors that can merge
another error into a combined error.










## <a name="Unmarshaler">type</a> [Unmarshaler](/src/target/service.go?s=2742:2806#L85)
``` go
type Unmarshaler func(context.Context, *Service, *http.Request) error
```
Unmarshaler defines the request payload unmarshaler signatures.














- - -
Generated by [godoc2md](https://godoc.org/github.com/davecheney/godoc2md)
