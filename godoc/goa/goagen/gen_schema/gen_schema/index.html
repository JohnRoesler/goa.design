<!DOCTYPE html>



<html class="not-ie" lang="en"> 
<head>

	
	<meta charset="utf-8">
	<title>goa :: Design-first API Generation</title>
	<meta name="description" content="Goa is a code generation framework built in Go that provides the developer with a clear and concise path to generate idiomatic API and Microservice architectures by using a design-first methodology.">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	
	<link href="/css/style.css" rel="stylesheet" type="text/css" />
	<link href="/css/font-awesome/font-awesome.min.css" rel="stylesheet" />
	
	
	
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800' rel='stylesheet' type='text/css' />

	
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="/js/jquery-1.10.2.min.js"><\/script>')</script>
	
	
	

</head>

<body>

		
	<header id="header">
		
		<nav class="navbar">
			<div class="navbar-inner">
				<div class="container">
					
					<a class="brand" href="/">
						goa
					</a>
					<ul class="nav">
						<li><a href="/" title="Home">Home</a></li>
						<li><a href="/guide/" title="Getting Started">Getting Started</a></li>

						<li class="dropdown">
							<a href="/components/" title="components">Components</a>
							
							<ul>
								<li><a href="/components/goagen/" title="">goagen</a></li>
								<li><a href="/components/runtime/" title="">runtime</a></li>
								<li><a href="/components/swagger/" title="">swagger</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="/middleware/" title="middleware">Middleware</a>
							
							<ul>
								<li><a href="/middleware/jwt/" title="">JWT</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="/plugins/" title="plugins">Plugins</a>
							
							<ul>
								<li><a href="/plugins/gorma/" title="">gorma</a></li>
							</ul>
						</li>
						<li><a href="/tutorials/" title="Tutorials">Tutorials</a></li>
						<li><a href="/blog/" title="Blog">Blog</a></li>
						<li><a href="https://github.com/goadesign/goa" title="GitHub">GitHub</a></li>
					</ul>
				</div>
			</div>
		</nav>

	</header>
	
	
	<section id="content" class="container">

	<div class="hero-unit">
		<h1>goa/goagen/gen_schema</h1>
		<p>godoc for goa/goagen/gen_schema</p>
	</div>

	<hr />

	
	<div class="row" id="blog">

		
		<div class="span8"> 
			

<h1 id="genschema:aea1ef6a3078618c405dcf9c06909aa7">genschema</h1>

<pre><code>import &quot;github.com/goadesign/goa/goagen/gen_schema&quot;
</code></pre>

<p>Package genschema provides a generator for the JSON schema controller.
The schema controller responds to GET /schema requests with the API JSON Hyper-schema.
This JSON schema can be used to generate API documentation, ruby and Go API clients.
See the blog post (<a href="https://blog.heroku.com/archives/2014/1/8/json_schema_for_heroku_platform_api">https://blog.heroku.com/archives/2014/1/8/json_schema_for_heroku_platform_api</a>)
describing how Heroku leverages the JSON Hyper-schema standard (<a href="http://json-schema.org/latest/json-schema-hypermedia.html">http://json-schema.org/latest/json-schema-hypermedia.html</a>)
for more information.</p>

<h2 id="constants:aea1ef6a3078618c405dcf9c06909aa7">Constants</h2>

<pre><code class="language-go">const SchemaRef = &quot;http://json-schema.org/draft-04/hyper-schema&quot;
</code></pre>

<p>SchemaRef is the JSON Hyper-schema standard href.</p>

<h2 id="variables:aea1ef6a3078618c405dcf9c06909aa7">Variables</h2>

<pre><code class="language-go">var (
    // Definitions contains the generated JSON schema definitions
    Definitions map[string]*JSONSchema
)
</code></pre>

<pre><code class="language-go">var ServiceURL string
</code></pre>

<p>ServiceURL is used to build the JSON schema ID of the root document.</p>

<h2 id="func-generate:aea1ef6a3078618c405dcf9c06909aa7">func Generate</h2>

<pre><code class="language-go">func Generate(api *design.APIDefinition) (files []string, err error)
</code></pre>

<p>Generate is the generator entry point called by the meta generator.</p>

<h2 id="func-generatemediatypedefinition:aea1ef6a3078618c405dcf9c06909aa7">func GenerateMediaTypeDefinition</h2>

<pre><code class="language-go">func GenerateMediaTypeDefinition(api *design.APIDefinition, mt *design.MediaTypeDefinition)
</code></pre>

<p>GenerateMediaTypeDefinition produces the JSON schema corresponding to the given media type.</p>

<h2 id="func-generateresourcedefinition:aea1ef6a3078618c405dcf9c06909aa7">func GenerateResourceDefinition</h2>

<pre><code class="language-go">func GenerateResourceDefinition(api *design.APIDefinition, r *design.ResourceDefinition)
</code></pre>

<p>GenerateResourceDefinition produces the JSON schema corresponding to the given API resource.
It stores the results in cachedSchema.</p>

<h2 id="func-generatetypedefinition:aea1ef6a3078618c405dcf9c06909aa7">func GenerateTypeDefinition</h2>

<pre><code class="language-go">func GenerateTypeDefinition(api *design.APIDefinition, ut *design.UserTypeDefinition)
</code></pre>

<p>GenerateTypeDefinition produces the JSON schema corresponding to the given type.</p>

<h2 id="func-jsonschemadir:aea1ef6a3078618c405dcf9c06909aa7">func JSONSchemaDir</h2>

<pre><code class="language-go">func JSONSchemaDir() string
</code></pre>

<p>JSONSchemaDir is the path to the directory where the schema controller is generated.</p>

<h2 id="func-mediatyperef:aea1ef6a3078618c405dcf9c06909aa7">func MediaTypeRef</h2>

<pre><code class="language-go">func MediaTypeRef(api *design.APIDefinition, mt *design.MediaTypeDefinition) string
</code></pre>

<p>MediaTypeRef produces the JSON reference to the media type definition.</p>

<h2 id="func-typeref:aea1ef6a3078618c405dcf9c06909aa7">func TypeRef</h2>

<pre><code class="language-go">func TypeRef(api *design.APIDefinition, ut *design.UserTypeDefinition) string
</code></pre>

<p>TypeRef produces the JSON reference to the type definition.</p>

<h2 id="type-command:aea1ef6a3078618c405dcf9c06909aa7">type Command</h2>

<pre><code class="language-go">type Command struct {
    *codegen.BaseCommand
}
</code></pre>

<p>Command is the goa application code generator command line data structure.
It implements meta.Command.</p>

<h3 id="func-newcommand:aea1ef6a3078618c405dcf9c06909aa7">func NewCommand</h3>

<pre><code class="language-go">func NewCommand() *Command
</code></pre>

<p>NewCommand instantiates a new command.</p>

<h3 id="func-command-registerflags:aea1ef6a3078618c405dcf9c06909aa7">func (*Command) RegisterFlags</h3>

<pre><code class="language-go">func (c *Command) RegisterFlags(r codegen.FlagRegistry)
</code></pre>

<p>RegisterFlags registers the command line flags with the given registry.</p>

<h3 id="func-command-run:aea1ef6a3078618c405dcf9c06909aa7">func (*Command) Run</h3>

<pre><code class="language-go">func (c *Command) Run() ([]string, error)
</code></pre>

<p>Run simply calls the meta generator.</p>

<h2 id="type-generator:aea1ef6a3078618c405dcf9c06909aa7">type Generator</h2>

<pre><code class="language-go">type Generator struct {
    // contains filtered or unexported fields
}
</code></pre>

<p>Generator is the application code generator.</p>

<h3 id="func-generator-cleanup:aea1ef6a3078618c405dcf9c06909aa7">func (*Generator) Cleanup</h3>

<pre><code class="language-go">func (g *Generator) Cleanup()
</code></pre>

<p>Cleanup removes all the files generated by this generator during the last invokation of Generate.</p>

<h3 id="func-generator-generate:aea1ef6a3078618c405dcf9c06909aa7">func (*Generator) Generate</h3>

<pre><code class="language-go">func (g *Generator) Generate(api *design.APIDefinition) (_ []string, err error)
</code></pre>

<p>Generate produces the skeleton main.</p>

<h2 id="type-jsonlink:aea1ef6a3078618c405dcf9c06909aa7">type JSONLink</h2>

<pre><code class="language-go">type JSONLink struct {
    Title        string      `json:&quot;title,omitempty&quot;`
    Description  string      `json:&quot;description,omitempty&quot;`
    Rel          string      `json:&quot;rel,omitempty&quot;`
    Href         string      `json:&quot;href,omitempty&quot;`
    Method       string      `json:&quot;method,omitempty&quot;`
    Schema       *JSONSchema `json:&quot;schema,omitempty&quot;`
    TargetSchema *JSONSchema `json:&quot;targetSchema,omitempty&quot;`
    MediaType    string      `json:&quot;mediaType,omitempty&quot;`
    EncType      string      `json:&quot;encType,omitempty&quot;`
}
</code></pre>

<p>JSONLink represents a &ldquo;link&rdquo; field in a JSON hyper schema.</p>

<h2 id="type-jsonmedia:aea1ef6a3078618c405dcf9c06909aa7">type JSONMedia</h2>

<pre><code class="language-go">type JSONMedia struct {
    BinaryEncoding string `json:&quot;binaryEncoding,omitempty&quot;`
    Type           string `json:&quot;type,omitempty&quot;`
}
</code></pre>

<p>JSONMedia represents a &ldquo;media&rdquo; field in a JSON hyper schema.</p>

<h2 id="type-jsonschema:aea1ef6a3078618c405dcf9c06909aa7">type JSONSchema</h2>

<pre><code class="language-go">type JSONSchema struct {
    Schema string `json:&quot;$schema,omitempty&quot;`
    // Core schema
    ID           string                 `json:&quot;id,omitempty&quot;`
    Title        string                 `json:&quot;title,omitempty&quot;`
    Type         JSONType               `json:&quot;type,omitempty&quot;`
    Items        *JSONSchema            `json:&quot;items,omitempty&quot;`
    Properties   map[string]*JSONSchema `json:&quot;properties,omitempty&quot;`
    Definitions  map[string]*JSONSchema `json:&quot;definitions,omitempty&quot;`
    Description  string                 `json:&quot;description,omitempty&quot;`
    DefaultValue interface{}            `json:&quot;defaultValue,omitempty&quot;`

    // Hyper schema
    Media     *JSONMedia  `json:&quot;media,omitempty&quot;`
    ReadOnly  bool        `json:&quot;readOnly,omitempty&quot;`
    PathStart string      `json:&quot;pathStart,omitempty&quot;`
    Links     []*JSONLink `json:&quot;links,omitempty&quot;`
    Ref       string      `json:&quot;$ref,omitempty&quot;`

    // Validation
    Enum                 []interface{} `json:&quot;enum,omitempty&quot;`
    Format               string        `json:&quot;format,omitempty&quot;`
    Pattern              string        `json:&quot;pattern,omitempty&quot;`
    Minimum              float64       `json:&quot;minimum,omitempty&quot;`
    Maximum              float64       `json:&quot;maximum,omitempty&quot;`
    MinLength            int           `json:&quot;minLength,omitempty&quot;`
    MaxLength            int           `json:&quot;maxLength,omitempty&quot;`
    Required             []string      `json:&quot;required,omitempty&quot;`
    AdditionalProperties bool          `json:&quot;additionalProperties,omitempty&quot;`

    // Union
    AnyOf []*JSONSchema `json:&quot;anyOf,omitempty&quot;`
}
</code></pre>

<p>JSONSchema represents an instance of a JSON schema.
See <a href="http://json-schema.org/documentation.html">http://json-schema.org/documentation.html</a></p>

<h3 id="func-apischema:aea1ef6a3078618c405dcf9c06909aa7">func APISchema</h3>

<pre><code class="language-go">func APISchema(api *design.APIDefinition) *JSONSchema
</code></pre>

<p>APISchema produces the API JSON hyper schema.</p>

<h3 id="func-newjsonschema:aea1ef6a3078618c405dcf9c06909aa7">func NewJSONSchema</h3>

<pre><code class="language-go">func NewJSONSchema() *JSONSchema
</code></pre>

<p>NewJSONSchema instantiates a new JSON schema.</p>

<h3 id="func-typeschema:aea1ef6a3078618c405dcf9c06909aa7">func TypeSchema</h3>

<pre><code class="language-go">func TypeSchema(api *design.APIDefinition, t design.DataType) *JSONSchema
</code></pre>

<p>TypeSchema produces the JSON schema corresponding to the given data type.</p>

<h3 id="func-jsonschema-dup:aea1ef6a3078618c405dcf9c06909aa7">func (*JSONSchema) Dup</h3>

<pre><code class="language-go">func (s *JSONSchema) Dup() *JSONSchema
</code></pre>

<p>Dup creates a shallow clone of the given schema.</p>

<h3 id="func-jsonschema-json:aea1ef6a3078618c405dcf9c06909aa7">func (*JSONSchema) JSON</h3>

<pre><code class="language-go">func (s *JSONSchema) JSON() ([]byte, error)
</code></pre>

<p>JSON serializes the schema into JSON.
It makes sure the &ldquo;$schema&rdquo; standard field is set if needed prior to delegating to the standard
JSON marshaler.</p>

<h3 id="func-jsonschema-merge:aea1ef6a3078618c405dcf9c06909aa7">func (*JSONSchema) Merge</h3>

<pre><code class="language-go">func (s *JSONSchema) Merge(other *JSONSchema)
</code></pre>

<p>Merge does a two level deep merge of other into s.</p>

<h2 id="type-jsontype:aea1ef6a3078618c405dcf9c06909aa7">type JSONType</h2>

<pre><code class="language-go">type JSONType string
</code></pre>

<p>JSONType is the JSON type enum.</p>

<pre><code class="language-go">const (
    // JSONArray represents a JSON array.
    JSONArray JSONType = &quot;array&quot;
    // JSONBoolean represents a JSON boolean.
    JSONBoolean = &quot;boolean&quot;
    // JSONInteger represents a JSON number without a fraction or exponent part.
    JSONInteger = &quot;integer&quot;
    // JSONNumber represents any JSON number. Number includes integer.
    JSONNumber = &quot;number&quot;
    // JSONNull represents the JSON null value.
    JSONNull = &quot;null&quot;
    // JSONObject represents a JSON object.
    JSONObject = &quot;object&quot;
    // JSONString represents a JSON string.
    JSONString = &quot;string&quot;
)
</code></pre>

<hr />

<p>Generated by <a href="http://godoc.org/github.com/davecheney/godoc2md">godoc2md</a></p>


		</div>

		
	
		<div class="sidebar span4">

			
			<div class="widget">
				<input id="search" type="search" class="animated" placeholder="Search" />
				 <ul id="results">
    			        </ul>
			</div>

			
			<div class="widget">
				<h4>All Categories</h4>
				<ul class="icons-ul list-style">
					
						<li><a href="/categories/dsl-engine/">dsl-engine</a></li>
					
						<li><a href="/categories/generation/">generation</a></li>
					
						<li><a href="/categories/godoc/">godoc</a></li>
					
						<li><a href="/categories/middleware/">middleware</a></li>
					
						<li><a href="/categories/runtime/">runtime</a></li>
					
						<li><a href="/categories/swagger/">swagger</a></li>
					

				</ul>
			</div>

			
			<div class="widget">
				<h4>All Tags</h4>
				<ul class="tags">
					
						<li><a href="/tags/apidsl/">apidsl</a></li>
					
						<li><a href="/tags/app/">app</a></li>
					
						<li><a href="/tags/auth/">auth</a></li>
					
						<li><a href="/tags/binc/">binc</a></li>
					
						<li><a href="/tags/cbor/">cbor</a></li>
					
						<li><a href="/tags/cellar-cli/">cellar-cli</a></li>
					
						<li><a href="/tags/client/">client</a></li>
					
						<li><a href="/tags/codegen/">codegen</a></li>
					
						<li><a href="/tags/cors/">cors</a></li>
					
						<li><a href="/tags/design/">design</a></li>
					
						<li><a href="/tags/dsl/">dsl</a></li>
					
						<li><a href="/tags/dslengine/">dslengine</a></li>
					
						<li><a href="/tags/example/">example</a></li>
					
						<li><a href="/tags/gen_app/">gen_app</a></li>
					
						<li><a href="/tags/gen_client/">gen_client</a></li>
					
						<li><a href="/tags/gen_gen/">gen_gen</a></li>
					
						<li><a href="/tags/gen_js/">gen_js</a></li>
					
						<li><a href="/tags/gen_main/">gen_main</a></li>
					
						<li><a href="/tags/gen_schema/">gen_schema</a></li>
					
						<li><a href="/tags/gen_swagger/">gen_swagger</a></li>
					
						<li><a href="/tags/genmodels/">genmodels</a></li>
					
						<li><a href="/tags/goa/">goa</a></li>
					
						<li><a href="/tags/goagen/">goagen</a></li>
					
						<li><a href="/tags/godoc/">godoc</a></li>
					
						<li><a href="/tags/gogoprotobuf/">gogoprotobuf</a></li>
					
						<li><a href="/tags/gorma/">gorma</a></li>
					
						<li><a href="/tags/gzip/">gzip</a></li>
					
						<li><a href="/tags/json/">json</a></li>
					
						<li><a href="/tags/jwt/">jwt</a></li>
					
						<li><a href="/tags/meta/">meta</a></li>
					
						<li><a href="/tags/middleware/">middleware</a></li>
					
						<li><a href="/tags/msgpack/">msgpack</a></li>
					
						<li><a href="/tags/swagger/">swagger</a></li>
					
						<li><a href="/tags/test/">test</a></li>
					
						<li><a href="/tags/utils/">utils</a></li>
					
				</ul>
			</div>

		</div>
		<script type="text/javascript" src="/js/lunr.min.js"></script>

    <script type="text/javascript">
    var lunrIndex,
        $results,
        pagesIndex;

    
    function initLunr() {
        
        $.getJSON("/js/pindex.json")
            .done(function(index) {
                pagesIndex = index;
                console.log("index:", pagesIndex);

                
                
                lunrIndex = lunr(function() {
                    this.field("title", {
                        boost: 10
                    });
                    this.field("tags", {
                        boost: 5
                    });
                    this.field("content");

                    
                    this.ref("href");
                });

                
                pagesIndex.forEach(function(page) {
                    lunrIndex.add(page);
                });
            })
            .fail(function(jqxhr, textStatus, error) {
                var err = textStatus + ", " + error;
                console.error("Error getting Hugo index flie:", err);
            });
    }

    
    function initUI() {
        $results = $("#results");
        $("#search").keyup(function() {
            $results.empty();

            
            var query = $(this).val();
            if (query.length < 2) {
                return;
            }

            var results = search(query);

            renderResults(results);
        });
    }

    

    function search(query) {
        
        
        
        
        
        return lunrIndex.search(query).map(function(result) {
                return pagesIndex.filter(function(page) {
                    return page.href === result.ref;
                })[0];
            });
    }

    

    function renderResults(results) {
        if (!results.length) {
            return;
        }

        
        results.slice(0, 10).forEach(function(result) {
            var $result = $("<li>");
            $result.append($("<a>", {
                href: result.href,
                text: "» " + result.title
            }));
            $results.append($result);
        });
    }

    
    initLunr();

    $(document).ready(function() {
        initUI();
    });
    </script>
	

	</div>
	</section>
		

	<footer id="footer">
		<div class="container">
			<div class="row">
				<div class="span4">
					<a class="brand" href="/">
						goa
					</a>
					<p>
						Elegant code generation<br />for your API or microservice. <br />
						Design First
						
					</p>
				</div>
				<div class="span4 social-networks">
					<h3>Find us elsewhere</h3>
					<p>
						<a class="social-network twitter" href="https://twitter.com/goadesign"></a>
					</p>
				</div>
				<div class="span4 newsletter">
					<h3>Developer List</h3>
					<a href="https://groups.google.com/forum/#!forum/goadesign">Join the Google Group</a>
				</div> 
			</div> 		
		</div> 
	</footer>

	<footer id="copyright">
		<div class="container">
			<div class="row">
				<div class="span8">
					&copy; 2015—2016 by <a>Raphael Simon and the goa contributors</a>
				</div>
			</div> 		
		</div> 
	</footer>

	

	<script type="text/javascript" src="/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/js/jquery.isotope.min.js"></script>
	<script type="text/javascript" src="/js/jquery.touchSwipe.min.js"></script>
	<script type="text/javascript" src="/js/jquery.hotkeys.min.js" charset='utf-8'></script>
	<script type="text/javascript" src="/js/functions.min.js"></script>
	
</body>
</html>		

